<div class="container-fluid g-0">
  <app-dash-header></app-dash-header>
  <main>
    <div [ngClass]="{'display-area-shrink':sideNavStatus}" class="display-area p-3">

<div class="p-3">
  <!-- Breadcrumb navigation -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="">Home</a></li>
      <li class="breadcrumb-item"><a href="quiz-test">Quiz</a></li> <!-- Link to forum homepage -->
           </ol>
  </nav>
  <div>
<div>
<h2 *ngIf="sections.length > 0">Section: {{ sections[currentSectionIndex].section }}</h2>


  <!-- Display only the current question in the current section -->
  <div *ngIf="currentSectionQuestions.length > 0 && !quizSubmitted">
    <h4>Question {{ currentQuestionIndex + 1 }}:</h4>
    
    <app-question
    [sectionIndex]="currentSectionIndex"
      [question]="currentSectionQuestions[currentQuestionIndex]"
      [questionIndex]="currentQuestionIndex"
      [selectedOptionIndex]="selectedOptions[currentSectionIndex]?.[currentQuestionIndex] ?? null"
      (previous)="moveToPreviousQuestion()"
      (next)="moveToNextQuestion()"
      (optionSelected)="handleOptionSelected($event)"
    ></app-question>
  </div>

  <!-- Navigation buttons -->
  <div class="navigation-buttons" *ngIf="!quizSubmitted">
    <button (click)="moveToPreviousQuestion()" 
            [disabled]="(currentSectionIndex === 0 && currentQuestionIndex === 0)">Previous</button>
    
    <button (click)="moveToNextQuestion()" 
            [disabled]="(currentSectionIndex === sections.length - 1 && currentQuestionIndex === currentSectionQuestions.length - 1)">Next</button>
  </div>
  
  <!-- Submit button -->
  <div *ngIf="!quizSubmitted">
    <button  (click)="submitQuiz()">Submit</button>
  </div>
  

  <!-- Dashboard after quiz submission -->
  <div *ngIf="quizSubmitted" class="dashboard">
    <div *ngFor="let stat of getStatistics()">
      <h3>{{ stat.section }}</h3>
      <p>Total Questions: {{ stat.totalQuestions }}</p>
      <p>Correct Answers: {{ stat.correctAnswers }}</p>
      <p>Percentage: {{ stat.percentage }}%</p>
    </div>
    
    <div *ngFor="let section of sections">
      <h3>{{ section.section }}</h3>
    <!-- Show the results for each question -->
    <div *ngFor="let question of currentSectionQuestions; let index = index">
      <h4>Question {{ index + 1 }}: {{ question.question }}</h4>
      <p *ngFor="let option of question.options; let optIndex = index">
        <!-- {{ getOptionLetter(option) }}. {{ option[getOptionLetter(option)] }}  -->
        <span *ngIf="isSelectedOption(currentSectionIndex, index, getOptionLetter(option))" class="selected">(Selected)</span>
        <span *ngIf="isCorrectOption(index, getOptionLetter(option))" class="correct">(Correct)</span>
        <span *ngIf="!isCorrectOption(index, getOptionLetter(option)) && isSelectedOption(currentSectionIndex, index, getOptionLetter(option))" class="wrong">(Wrong)</span>
      </p>
    </div>
    </div>
  </div>
</div>
  </div>
  
  

</div></div></main></div>