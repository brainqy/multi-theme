<div class="container-fluid g-0">
  <app-dash-header></app-dash-header>
  <main>
    <div [ngClass]="{'display-area-shrink':sideNavStatus}" class="display-area p-3">

<div class="p-3">
  <!-- Breadcrumb navigation -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="">Home</a></li>
      <li class="breadcrumb-item"><a href="quiz-test">Quiz</a></li> <!-- Link to forum homepage -->
           </ol>
  </nav>
  <div>
<div>
<h2 *ngIf="sections.length > 0">Section: {{ sections[currentSectionIndex].section }}</h2>


  <!-- Display only the current question in the current section -->
  <div *ngIf="currentSectionQuestions.length > 0 && !quizSubmitted">
    <h4>Question {{ currentQuestionIndex + 1 }}:</h4>
    
    <app-question
    [sectionIndex]="currentSectionIndex"
      [question]="currentSectionQuestions[currentQuestionIndex]"
      [questionIndex]="currentQuestionIndex"
      [selectedOptionIndex]="selectedOptions[currentSectionIndex]?.[currentQuestionIndex] ?? null"
      (previous)="moveToPreviousQuestion()"
      (next)="moveToNextQuestion()"
      (optionSelected)="handleOptionSelected($event)"
    ></app-question>
  </div>

  <!-- Navigation buttons -->
  <div class="navigation-buttons" *ngIf="!quizSubmitted">
    <button (click)="moveToPreviousQuestion()" 
            [disabled]="(currentSectionIndex === 0 && currentQuestionIndex === 0)">Previous</button>
    
    <button (click)="moveToNextQuestion()" 
            [disabled]="(currentSectionIndex === sections.length - 1 && currentQuestionIndex === currentSectionQuestions.length - 1)">Next</button>
  </div>
  
  <!-- Submit button -->
  <div *ngIf="!quizSubmitted">
    <button  (click)="submitQuiz()">Submit</button>
  </div>
  

  <!-- Dashboard after quiz submission -->
  <div *ngIf="quizSubmitted" class="dashboard">
    <div *ngFor="let stat of getStatistics()">
      <h3>{{ stat.section }}</h3>
      <p>Total Questions: {{ stat.totalQuestions }}</p>
      <p>Correct Answers: {{ stat.correctAnswers }}</p>
      <p>Percentage: {{ stat.percentage }}%</p>
    </div>
    
    <div *ngFor="let question of allQuestions; let index = index">
      <!-- Display section name if needed -->
      <h3>{{ question.section }} - Question {{ index + 1 }}: {{ question.question }}</h3>
    
      <!-- Loop through the options for the current question -->
      <div *ngFor="let option of question.options">
        <ng-container *ngIf="getOptionLetter(option) as optionLetter">
          <!-- Display option letter and value -->
          <span>{{ optionLetter }}. {{ getOptionValue(option, optionLetter) }}</span>
    
          <!-- Show selected, correct, or wrong status based on the user's answer -->
          <span *ngIf="isSelectedOption(question.sectionIndex, question.questionIndex, optionLetter)" class="selected">(Selected)</span>
          <span *ngIf="isCorrectOption(question.sectionIndex, question.questionIndex, optionLetter)" class="correct">(Correct)</span>
          <span *ngIf="!isCorrectOption(question.sectionIndex, question.questionIndex, optionLetter) && isSelectedOption(question.sectionIndex, question.questionIndex, optionLetter)" class="wrong">(Wrong)</span>
        </ng-container>
      </div>
    </div>
    
  </div>
</div>
  </div>
  
  

</div></div></main></div>